#############################################################
# CMake settings
CMAKE_MINIMUM_REQUIRED(VERSION 3.1.0)
SET(CMAKE_COLOR_MAKEFILE ON)
PROJECT(QField VERSION 1.3)
SET(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})

ADD_DEFINITIONS(-DVERSTR="1.2.0")
ADD_DEFINITIONS(-DVERSIONCODE="1.2.0")
ADD_DEFINITIONS(-DAPP_NAME="QField")

SET(CMAKE_AUTOMOC ON)
SET(CMAKE_AUTORCC ON)

ENABLE_TESTING()
FIND_PACKAGE(QGIS)

SET (DEFAULT_BIN_SUBDIR     bin)
SET (DEFAULT_CGIBIN_SUBDIR  bin)
SET (DEFAULT_LIB_SUBDIR     lib${LIB_SUFFIX})
SET (DEFAULT_INCLUDE_SUBDIR include/qfield)

SET (QFIELD_BIN_SUBDIR     ${DEFAULT_BIN_SUBDIR}     CACHE STRING "Subdirectory where executables will be installed")
SET (QFIELD_LIB_SUBDIR     ${DEFAULT_LIB_SUBDIR}     CACHE STRING "Subdirectory where libraries will be installed")
SET (QFIELD_INCLUDE_SUBDIR ${DEFAULT_INCLUDE_SUBDIR} CACHE STRING "Subdirectory where header files will be installed")

MARK_AS_ADVANCED (QFIELD_INCLUDE_SUBDIR QFIELD_BIN_SUBDIR QFIELD_LIB_SUBDIR)
SET (QFIELD_BIN_DIR ${QFIELD_BIN_SUBDIR})
SET (QFIELD_LIB_DIR ${QFIELD_LIB_SUBDIR})
SET (QFIELD_INCLUDE_DIR ${QFIELD_INCLUDE_SUBDIR})

IF(MXE)
  ADD_COMPILE_DEFINITIONS(MXE)
ENDIF(MXE)

IF(MSVC)
  ADD_DEFINITIONS(-D_USE_MATH_DEFINES)
ENDIF(MSVC)

ADD_SUBDIRECTORY(3rdparty/tessellate)
ADD_SUBDIRECTORY(src/qgsquick)
ADD_SUBDIRECTORY(src/core)
ADD_SUBDIRECTORY(src/app)
ADD_SUBDIRECTORY(test)
